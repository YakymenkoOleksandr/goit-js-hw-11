{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const inputOfWords = document.querySelector('.inputOfWords');\n  const buttonForInput = document.querySelector('.buttonForInput');\n  const userList = document.querySelector('.userList');\n  const areaForLoader = document.querySelector('.areaForLoader');\n\n  let wordOfUser = '';\n  let imagesLength = '';\n\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n\n  \n  buttonForInput.addEventListener('click', event => {\n    loaderF();\n    event.preventDefault();\n    userList.innerHTML = '';\n    setTimeout(() => {\n    wordOfUser = inputOfWords.value.trim();\n      checkInputValidity();\n    }, 2000);\n  \n\n  });\n\n  function checkInputValidity() {\n  \n    fetchImages()\n      .then(images => {\n        if (wordOfUser === '') {\n          iziToast.show({\n            color: 'red',\n            message: `Sorry, the input field must be filled in to start the photo search.`,\n            position: 'topCenter',\n          });\n        } else if (images.length === 0) {\n          iziToast.show({\n            color: 'red',\n            message: `Sorry, there are no images matching your search query. Please try again!`,\n            position: 'topCenter',\n          });\n        } else {\n          renderImg(images);\n    \n        }\n      })\n      .catch(error => console.log(error))\n      .finally(() => spanElementRem());\n  }\n\n  function renderImg(images) {\n    imagesLength = images.length;\n    \n    const markupImg = images\n      .map(image => {\n        console.log(image);\n        return `<div class=\"blockForAllElements\">\n          <li>\n          <a href=${image.largeImageURL} download=\"false\">\n          <img src=${image.webformatURL} alt = \"${image.tags}\" class = \"imgOfUser\">\n          </a>\n          </li>\n          <div class = \"divForDescription\"> \n          <ul class=\"blockOfInfo\"> \n            <li class=\"title\">Likes</li>\n            <li class=\"info\">${image.likes}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Views</li>\n            <li class=\"info\">${image.views}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Comments</li>\n            <li class=\"info\">${image.comments}</li>\n          </ul>\n          <ul class=\"block\">\n            <li class=\"title\">Downloads</li>\n            <li class=\"info\">${image.downloads}</li>\n          </ul>\n          </div>\n        </div>`;\n      })\n      .join('');\n    userList.insertAdjacentHTML('beforeend', markupImg);\n\n    lightbox.refresh();\n  }\n\n  function fetchImages() {\n    return fetch(\n      `https://pixabay.com/api/?key=42977219-0f6c9f9217f976d8651793c3a&q=${wordOfUser}&image_type=photo&per_page=15&orientation=horizontal&safesearch=true`\n    )\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .then(data => data.hits);\n  }\n\n  function loaderF() {\n    const spanElement = document.createElement('span');\n    areaForLoader.appendChild(spanElement);\n    spanElement.classList.add('loader');\n  }\n\n  function spanElementRem() {\n    const loaderF = document.querySelector('.loader');\n    loaderF.remove();\n  }\n    \n});"],"names":["inputOfWords","buttonForInput","userList","areaForLoader","wordOfUser","lightbox","SimpleLightbox","event","loaderF","checkInputValidity","fetchImages","images","iziToast","renderImg","error","spanElementRem","markupImg","image","response","data","spanElement"],"mappings":"6vBAMA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMA,EAAe,SAAS,cAAc,eAAe,EACrDC,EAAiB,SAAS,cAAc,iBAAiB,EACzDC,EAAW,SAAS,cAAc,WAAW,EAC7CC,EAAgB,SAAS,cAAc,gBAAgB,EAE7D,IAAIC,EAAa,GAIjB,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,KAClB,CAAG,EAGDL,EAAe,iBAAiB,QAASM,GAAS,CAChDC,IACAD,EAAM,eAAc,EACpBL,EAAS,UAAY,GACrB,WAAW,IAAM,CACjBE,EAAaJ,EAAa,MAAM,OAC9BS,GACD,EAAE,GAAI,CAGX,CAAG,EAED,SAASA,GAAqB,CAE5BC,EAAa,EACV,KAAKC,GAAU,CACVP,IAAe,GACjBQ,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,sEACT,SAAU,WACtB,CAAW,EACQD,EAAO,SAAW,EAC3BC,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,2EACT,SAAU,WACtB,CAAW,EAEDC,EAAUF,CAAM,CAG1B,CAAO,EACA,MAAMG,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAMC,EAAc,CAAE,CAClC,CAED,SAASF,EAAUF,EAAQ,CACVA,EAAO,OAEtB,MAAMK,EAAYL,EACf,IAAIM,IACH,QAAQ,IAAIA,CAAK,EACV;AAAA;AAAA,oBAEKA,EAAM,aAAa;AAAA,qBAClBA,EAAM,YAAY,WAAWA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAM7BA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,+BAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,gBAIvC,EACA,KAAK,EAAE,EACVf,EAAS,mBAAmB,YAAac,CAAS,EAElDX,EAAS,QAAO,CACjB,CAED,SAASK,GAAc,CACrB,OAAO,MACL,qEAAqEN,CAAU,sEAChF,EACE,KAAKc,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACxB,CAAO,EACA,KAAKC,GAAQA,EAAK,IAAI,CAC1B,CAED,SAASX,GAAU,CACjB,MAAMY,EAAc,SAAS,cAAc,MAAM,EACjDjB,EAAc,YAAYiB,CAAW,EACrCA,EAAY,UAAU,IAAI,QAAQ,CACnC,CAED,SAASL,GAAiB,CACR,SAAS,cAAc,SAAS,EACxC,OAAM,CACf,CAEH,CAAC"}